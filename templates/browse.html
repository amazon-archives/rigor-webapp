<!DOCTYPE html>
<html lang="en" ng-app="browseApp" ng-controller="BrowseController">
<head>
    <title> Rigor </title>
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/static/css/vendor/bootstrap.css" />
    <link rel="stylesheet" href="/static/css/rigor.css" />
    <script src="/static/js/vendor/angular-1.0.6.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/js/browse.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>

<div class="container">

    <div class="row">
        <div class="span12 r-red">

            <h2> Browse </h2>

        </div>
    </div>
    <div class="row">
        <div class="span3 r-gray">
            <div class="well well-small">

            <h3> Filter </h3>
            <form ng-submit="applyFilter()">
                <label>database</label>
                <select class="span2" ng-model="filter.database_name">
                    <option ng-repeat="dbname in database_names">(( dbname ))</option>
                </select>

                <label>source</label>
                <select class="span2" ng-model="filter.source">
                    <option ng-repeat="source in sources">(( source ))</option>
                </select>

                <label>sensor</label>
                <select class="span2" ng-model="filter.sensor">
                    <option ng-repeat="sensor in sensors">(( sensor ))</option>
                </select>

                <label>has_tags</label>
                <input type="text" class="span2" ng-model="filter.has_tags">

                <label>exclude_tags</label>
                <input type="text" class="span2" ng-model="filter.exclude_tags">

                <p><button type="submit" class="btn btn-primary">Go</button></p>
            </form>

            </div>
        </div>
        <div class="span9 r-blue">

            <h3> (( images.length )) Results (page (( filter.page ))) </h3>

            <ul class="pager">
                <li ng-class="{previous: true,  disabled: !search_has_occurred || filter.page <= 0}">
                    <a href="#" ng-click="prevButton()">&larr; Prev</a>
                </li>
                <li ng-class="{next: true,  disabled: !search_has_occurred}">
                    <a href="#" ng-click="nextButton()">Next &rarr;</a>
                </li>
            </ul>

            <ul class="thumbnails">

                <li class="span3" ng-repeat="image in images">
                    <div class="thumbnail">
                        <img ng-src="(( image.thumb_url ))" width=128 class="r-white">
                        <p>
                                 id: <strong>(( image.id ))</strong>
                            <br> date: <strong>(( image.stamp*1000 | date:'yyyy-MM-dd' ))</strong>
                            <br> sensor: <strong>(( image.sensor ))</strong>
                            <br> source: <strong>(( image.source ))</strong>
                            <br> <span ng-repeat="tag in image.tags">
                                    <span class="label label-info">(( tag ))</span> &nbsp;
                                 </span>
                        </p>
                    </div>
                </li>

            </ul>

        </div>
    </div>

</div>

</body>
</html>
